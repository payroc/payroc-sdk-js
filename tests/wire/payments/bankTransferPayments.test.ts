// This file was auto-generated by Fern from our API Definition.

import * as Payroc from "../../../src/api/index";
import { PayrocClient } from "../../../src/Client";
import { mockServerPool } from "../../mock-server/MockServerPool";
import { mockBearer } from "../mockAuth";

describe("BankTransferPaymentsClient", () => {
    test("list (1)", async () => {
        const server = mockServerPool.createServer();
        mockBearer(server);

        const client = new PayrocClient({
            maxRetries: 0,
            apiKey: "x-api-key",
            environment: { api: server.baseUrl, identity: server.baseUrl },
        });

        const rawResponseBody = {
            limit: 2,
            count: 2,
            hasMore: true,
            links: [
                {
                    rel: "next",
                    method: "get",
                    href: "https://api.payroc.com/v1/bank-transfer-payments?limit=2&processingTerminalId=1234001&after=E29U8OU8Q4",
                },
                {
                    rel: "previous",
                    method: "get",
                    href: "https://api.payroc.com/v1//bank-transfer-payments?limit=2&processingTerminalId=1234001&before=M2MJOG6O2Y",
                },
            ],
            data: [
                {
                    paymentId: "M2MJOG6O2Y",
                    processingTerminalId: "1234001",
                    order: {
                        orderId: "OrderRef6543",
                        dateTime: "2024-07-02T15:30:00Z",
                        description: "Large Pepperoni Pizza",
                        amount: 4999,
                        currency: "USD",
                        breakdown: {
                            subtotal: 4347,
                            tip: { type: "percentage", amount: 435, percentage: 10 },
                            taxes: [{ name: "Sales Tax", rate: 5, amount: 217 }],
                        },
                    },
                    customer: {
                        notificationLanguage: "en",
                        contactMethods: [{ type: "email", value: "jane.doe@example.com" }],
                    },
                    bankAccount: {
                        type: "pad",
                        nameOnAccount: "Sarah Hazel Hopper",
                        accountNumber: "1234567890",
                        transitNumber: "76543",
                        institutionNumber: "543",
                        secureToken: {
                            secureTokenId: "MREF_abc1de23-f4a5-6789-bcd0-12e345678901fa",
                            customerName: "Sarah Hazel Hopper",
                            token: "296753123456",
                            status: "notValidated",
                            link: { rel: "previous", method: "get", href: "<uri>" },
                        },
                    },
                    refunds: [
                        {
                            refundId: "CD3HN88U9F",
                            dateTime: "2024-07-14T12:25:00Z",
                            currency: "AED",
                            amount: 4999,
                            status: "ready",
                            responseCode: "A",
                            responseMessage: "Transaction refunded",
                            link: { rel: "previous", method: "get", href: "<uri>" },
                        },
                    ],
                    returns: [
                        {
                            paymentId: "M2MJOG6O2Y",
                            date: "2024-07-02",
                            returnCode: "R11",
                            returnReason: "Customer advises not authorized",
                            represented: false,
                            link: { rel: "previous", method: "get", href: "<uri>" },
                        },
                    ],
                    representment: {
                        paymentId: "M2MJOG6O2Y",
                        dateTime: "2024-07-02T15:30:00Z",
                        currency: "AED",
                        amount: 4999,
                        status: "ready",
                        responseCode: "A",
                        responseMessage: "Transaction approved",
                        link: { rel: "previous", method: "get", href: "<uri>" },
                    },
                    transactionResult: {
                        type: "payment",
                        status: "ready",
                        authorizedAmount: 4999,
                        currency: "USD",
                        responseCode: "A",
                        responseMessage: "Payment Approved",
                        processorResponseCode: "A",
                    },
                    customFields: [{ name: "yourCustomField", value: "abc123" }],
                },
                {
                    paymentId: "E29U8OU8Q4",
                    processingTerminalId: "1234001",
                    order: {
                        orderId: "OrderRef7654",
                        dateTime: "2024-07-02T15:30:00Z",
                        description: "test",
                        amount: 3999,
                        currency: "USD",
                        breakdown: {
                            subtotal: 3477,
                            tip: { type: "percentage", amount: 348, percentage: 10 },
                            taxes: [{ name: "Sales Tax", rate: 5, amount: 174 }],
                        },
                    },
                    customer: {
                        notificationLanguage: "en",
                        contactMethods: [{ type: "email", value: "jane.doe@example.com" }],
                    },
                    bankAccount: {
                        type: "pad",
                        nameOnAccount: "Sarah Hazel Hopper",
                        accountNumber: "1234567890",
                        transitNumber: "76543",
                        institutionNumber: "543",
                        secureToken: {
                            secureTokenId: "MREF_abc1de23-f4a5-6789-bcd0-12e345678901fa",
                            customerName: "Sarah Hazel Hopper",
                            token: "296753123456",
                            status: "notValidated",
                            link: { rel: "previous", method: "get", href: "<uri>" },
                        },
                    },
                    refunds: [
                        {
                            refundId: "CD3HN88U9F",
                            dateTime: "2024-07-14T12:25:00Z",
                            currency: "AED",
                            amount: 4999,
                            status: "ready",
                            responseCode: "A",
                            responseMessage: "Transaction refunded",
                            link: { rel: "previous", method: "get", href: "<uri>" },
                        },
                    ],
                    returns: [
                        {
                            paymentId: "M2MJOG6O2Y",
                            date: "2024-07-02",
                            returnCode: "R11",
                            returnReason: "Customer advises not authorized",
                            represented: false,
                            link: { rel: "previous", method: "get", href: "<uri>" },
                        },
                    ],
                    representment: {
                        paymentId: "M2MJOG6O2Y",
                        dateTime: "2024-07-02T15:30:00Z",
                        currency: "AED",
                        amount: 4999,
                        status: "ready",
                        responseCode: "A",
                        responseMessage: "Transaction approved",
                        link: { rel: "previous", method: "get", href: "<uri>" },
                    },
                    transactionResult: {
                        type: "payment",
                        status: "ready",
                        authorizedAmount: 3999,
                        currency: "USD",
                        responseCode: "A",
                        responseMessage: "Payment Approved",
                        processorResponseCode: "A",
                    },
                    customFields: [{ name: "yourCustomField", value: "abc123" }],
                },
            ],
        };
        server
            .mockEndpoint({ once: false })
            .get("/bank-transfer-payments")
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const expected = {
            limit: 2,
            count: 2,
            hasMore: true,
            links: [
                {
                    rel: "next",
                    method: "get",
                    href: "https://api.payroc.com/v1/bank-transfer-payments?limit=2&processingTerminalId=1234001&after=E29U8OU8Q4",
                },
                {
                    rel: "previous",
                    method: "get",
                    href: "https://api.payroc.com/v1//bank-transfer-payments?limit=2&processingTerminalId=1234001&before=M2MJOG6O2Y",
                },
            ],
            data: [
                {
                    paymentId: "M2MJOG6O2Y",
                    processingTerminalId: "1234001",
                    order: {
                        orderId: "OrderRef6543",
                        dateTime: "2024-07-02T15:30:00Z",
                        description: "Large Pepperoni Pizza",
                        amount: 4999,
                        currency: "USD",
                        breakdown: {
                            subtotal: 4347,
                            tip: {
                                type: "percentage",
                                amount: 435,
                                percentage: 10,
                            },
                            taxes: [
                                {
                                    name: "Sales Tax",
                                    rate: 5,
                                    amount: 217,
                                },
                            ],
                        },
                    },
                    customer: {
                        notificationLanguage: "en",
                        contactMethods: [
                            {
                                type: "email",
                                value: "jane.doe@example.com",
                            },
                        ],
                    },
                    bankAccount: {
                        type: "pad",
                        nameOnAccount: "Sarah Hazel Hopper",
                        accountNumber: "1234567890",
                        transitNumber: "76543",
                        institutionNumber: "543",
                        secureToken: {
                            secureTokenId: "MREF_abc1de23-f4a5-6789-bcd0-12e345678901fa",
                            customerName: "Sarah Hazel Hopper",
                            token: "296753123456",
                            status: "notValidated",
                            link: {
                                rel: "previous",
                                method: "get",
                                href: "<uri>",
                            },
                        },
                    },
                    refunds: [
                        {
                            refundId: "CD3HN88U9F",
                            dateTime: "2024-07-14T12:25:00Z",
                            currency: "AED",
                            amount: 4999,
                            status: "ready",
                            responseCode: "A",
                            responseMessage: "Transaction refunded",
                            link: {
                                rel: "previous",
                                method: "get",
                                href: "<uri>",
                            },
                        },
                    ],
                    returns: [
                        {
                            paymentId: "M2MJOG6O2Y",
                            date: "2024-07-02",
                            returnCode: "R11",
                            returnReason: "Customer advises not authorized",
                            represented: false,
                            link: {
                                rel: "previous",
                                method: "get",
                                href: "<uri>",
                            },
                        },
                    ],
                    representment: {
                        paymentId: "M2MJOG6O2Y",
                        dateTime: "2024-07-02T15:30:00Z",
                        currency: "AED",
                        amount: 4999,
                        status: "ready",
                        responseCode: "A",
                        responseMessage: "Transaction approved",
                        link: {
                            rel: "previous",
                            method: "get",
                            href: "<uri>",
                        },
                    },
                    transactionResult: {
                        type: "payment",
                        status: "ready",
                        authorizedAmount: 4999,
                        currency: "USD",
                        responseCode: "A",
                        responseMessage: "Payment Approved",
                        processorResponseCode: "A",
                    },
                    customFields: [
                        {
                            name: "yourCustomField",
                            value: "abc123",
                        },
                    ],
                },
                {
                    paymentId: "E29U8OU8Q4",
                    processingTerminalId: "1234001",
                    order: {
                        orderId: "OrderRef7654",
                        dateTime: "2024-07-02T15:30:00Z",
                        description: "test",
                        amount: 3999,
                        currency: "USD",
                        breakdown: {
                            subtotal: 3477,
                            tip: {
                                type: "percentage",
                                amount: 348,
                                percentage: 10,
                            },
                            taxes: [
                                {
                                    name: "Sales Tax",
                                    rate: 5,
                                    amount: 174,
                                },
                            ],
                        },
                    },
                    customer: {
                        notificationLanguage: "en",
                        contactMethods: [
                            {
                                type: "email",
                                value: "jane.doe@example.com",
                            },
                        ],
                    },
                    bankAccount: {
                        type: "pad",
                        nameOnAccount: "Sarah Hazel Hopper",
                        accountNumber: "1234567890",
                        transitNumber: "76543",
                        institutionNumber: "543",
                        secureToken: {
                            secureTokenId: "MREF_abc1de23-f4a5-6789-bcd0-12e345678901fa",
                            customerName: "Sarah Hazel Hopper",
                            token: "296753123456",
                            status: "notValidated",
                            link: {
                                rel: "previous",
                                method: "get",
                                href: "<uri>",
                            },
                        },
                    },
                    refunds: [
                        {
                            refundId: "CD3HN88U9F",
                            dateTime: "2024-07-14T12:25:00Z",
                            currency: "AED",
                            amount: 4999,
                            status: "ready",
                            responseCode: "A",
                            responseMessage: "Transaction refunded",
                            link: {
                                rel: "previous",
                                method: "get",
                                href: "<uri>",
                            },
                        },
                    ],
                    returns: [
                        {
                            paymentId: "M2MJOG6O2Y",
                            date: "2024-07-02",
                            returnCode: "R11",
                            returnReason: "Customer advises not authorized",
                            represented: false,
                            link: {
                                rel: "previous",
                                method: "get",
                                href: "<uri>",
                            },
                        },
                    ],
                    representment: {
                        paymentId: "M2MJOG6O2Y",
                        dateTime: "2024-07-02T15:30:00Z",
                        currency: "AED",
                        amount: 4999,
                        status: "ready",
                        responseCode: "A",
                        responseMessage: "Transaction approved",
                        link: {
                            rel: "previous",
                            method: "get",
                            href: "<uri>",
                        },
                    },
                    transactionResult: {
                        type: "payment",
                        status: "ready",
                        authorizedAmount: 3999,
                        currency: "USD",
                        responseCode: "A",
                        responseMessage: "Payment Approved",
                        processorResponseCode: "A",
                    },
                    customFields: [
                        {
                            name: "yourCustomField",
                            value: "abc123",
                        },
                    ],
                },
            ],
        };
        const page = await client.payments.bankTransferPayments.list({
            processingTerminalId: "1234001",
            orderId: "OrderRef6543",
            nameOnAccount: "Sarah%20Hazel%20Hopper",
            last4: "7890",
            dateFrom: "2024-07-01T00:00:00Z",
            dateTo: "2024-07-31T23:59:59Z",
            settlementState: "settled",
            settlementDate: "2024-07-15",
            paymentLinkId: "JZURRJBUPS",
            before: "2571",
            after: "8516",
            limit: 1,
        });
        expect(expected.data).toEqual(page.data);
    });

    test("list (2)", async () => {
        const server = mockServerPool.createServer();
        mockBearer(server);

        const client = new PayrocClient({
            maxRetries: 0,
            apiKey: "x-api-key",
            environment: { api: server.baseUrl, identity: server.baseUrl },
        });

        const rawResponseBody = {
            limit: 10,
            count: 0,
            hasMore: false,
            links: [
                { rel: "previous", method: "get", href: "<uri>" },
                { rel: "next", method: "get", href: "<uri>" },
            ],
        };
        server
            .mockEndpoint({ once: false })
            .get("/bank-transfer-payments")
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const page = await client.payments.bankTransferPayments.list({
            processingTerminalId: "1234001",
            orderId: "OrderRef6543",
            nameOnAccount: "Sarah%20Hazel%20Hopper",
            last4: "7890",
            dateFrom: "2024-07-01T00:00:00Z",
            dateTo: "2024-07-31T23:59:59Z",
            settlementState: "settled",
            settlementDate: "2024-07-15",
            paymentLinkId: "JZURRJBUPS",
            before: "2571",
            after: "8516",
            limit: 1,
        });
        expect(page.data).toEqual([]);
    });

    test("list (3)", async () => {
        const server = mockServerPool.createServer();
        mockBearer(server);

        const client = new PayrocClient({
            maxRetries: 0,
            apiKey: "x-api-key",
            environment: { api: server.baseUrl, identity: server.baseUrl },
        });

        const rawResponseBody = { type: "type", title: "title", status: 1, detail: "detail" };
        server
            .mockEndpoint({ once: false })
            .get("/bank-transfer-payments")
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.payments.bankTransferPayments.list({
                processingTerminalId: "buzz",
            });
        }).rejects.toThrow(Payroc.BadRequestError);
    });

    test("list (4)", async () => {
        const server = mockServerPool.createServer();
        mockBearer(server);

        const client = new PayrocClient({
            maxRetries: 0,
            apiKey: "x-api-key",
            environment: { api: server.baseUrl, identity: server.baseUrl },
        });

        const rawResponseBody = { type: "type", title: "title", status: 1, detail: "detail" };
        server
            .mockEndpoint({ once: false })
            .get("/bank-transfer-payments")
            .respondWith()
            .statusCode(401)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.payments.bankTransferPayments.list({
                processingTerminalId: "buzz",
            });
        }).rejects.toThrow(Payroc.UnauthorizedError);
    });

    test("list (5)", async () => {
        const server = mockServerPool.createServer();
        mockBearer(server);

        const client = new PayrocClient({
            maxRetries: 0,
            apiKey: "x-api-key",
            environment: { api: server.baseUrl, identity: server.baseUrl },
        });

        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint({ once: false })
            .get("/bank-transfer-payments")
            .respondWith()
            .statusCode(403)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.payments.bankTransferPayments.list({
                processingTerminalId: "buzz",
            });
        }).rejects.toThrow(Payroc.ForbiddenError);
    });

    test("list (6)", async () => {
        const server = mockServerPool.createServer();
        mockBearer(server);

        const client = new PayrocClient({
            maxRetries: 0,
            apiKey: "x-api-key",
            environment: { api: server.baseUrl, identity: server.baseUrl },
        });

        const rawResponseBody = { type: "type", title: "title", status: 1, detail: "detail" };
        server
            .mockEndpoint({ once: false })
            .get("/bank-transfer-payments")
            .respondWith()
            .statusCode(406)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.payments.bankTransferPayments.list({
                processingTerminalId: "buzz",
            });
        }).rejects.toThrow(Payroc.NotAcceptableError);
    });

    test("list (7)", async () => {
        const server = mockServerPool.createServer();
        mockBearer(server);

        const client = new PayrocClient({
            maxRetries: 0,
            apiKey: "x-api-key",
            environment: { api: server.baseUrl, identity: server.baseUrl },
        });

        const rawResponseBody = { type: "type", title: "title", status: 1, detail: "detail" };
        server
            .mockEndpoint({ once: false })
            .get("/bank-transfer-payments")
            .respondWith()
            .statusCode(500)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.payments.bankTransferPayments.list({
                processingTerminalId: "buzz",
            });
        }).rejects.toThrow(Payroc.InternalServerError);
    });

    test("create (1)", async () => {
        const server = mockServerPool.createServer();
        mockBearer(server);

        const client = new PayrocClient({
            maxRetries: 0,
            apiKey: "x-api-key",
            environment: { api: server.baseUrl, identity: server.baseUrl },
        });
        const rawRequestBody = {
            processingTerminalId: "1234001",
            order: {
                orderId: "OrderRef6543",
                description: "Large Pepperoni Pizza",
                amount: 4999,
                currency: "USD",
                breakdown: {
                    subtotal: 4347,
                    tip: { type: "percentage", percentage: 10 },
                    taxes: [{ type: "rate", rate: 5, name: "Sales Tax" }],
                },
            },
            customer: {
                notificationLanguage: "en",
                contactMethods: [{ type: "email", value: "jane.doe@example.com" }],
            },
            credentialOnFile: { tokenize: true },
            paymentMethod: {
                type: "ach",
                nameOnAccount: "Shara Hazel Hopper",
                accountNumber: "1234567890",
                routingNumber: "123456789",
            },
            customFields: [{ name: "yourCustomField", value: "abc123" }],
        };
        const rawResponseBody = {
            paymentId: "M2MJOG6O2Y",
            processingTerminalId: "1234001",
            order: {
                orderId: "OrderRef6543",
                dateTime: "2024-07-02T15:30:00Z",
                description: "Large Pepperoni Pizza",
                amount: 4999,
                currency: "USD",
                breakdown: {
                    subtotal: 4347,
                    tip: { type: "percentage", amount: 435, percentage: 10 },
                    taxes: [{ name: "Sales Tax", rate: 5, amount: 217 }],
                },
            },
            customer: {
                notificationLanguage: "en",
                contactMethods: [{ type: "email", value: "jane.doe@example.com" }],
            },
            bankAccount: {
                type: "ach",
                secCode: "web",
                nameOnAccount: "Sarah Hazel Hopper",
                accountNumber: "123456789",
                routingNumber: "123456789",
                secureToken: {
                    secureTokenId: "MREF_abc1de23-f4a5-6789-bcd0-12e345678901fa",
                    customerName: "Sarah Hazel Hopper",
                    token: "296753123456",
                    status: "notValidated",
                    link: { rel: "previous", method: "get", href: "<uri>" },
                },
            },
            refunds: [
                {
                    refundId: "CD3HN88U9F",
                    dateTime: "2024-07-14T12:25:00Z",
                    currency: "AED",
                    amount: 4999,
                    status: "ready",
                    responseCode: "A",
                    responseMessage: "Transaction refunded",
                    link: { rel: "previous", method: "get", href: "<uri>" },
                },
            ],
            returns: [
                {
                    paymentId: "M2MJOG6O2Y",
                    date: "2024-07-02",
                    returnCode: "R11",
                    returnReason: "Customer advises not authorized",
                    represented: false,
                    link: { rel: "previous", method: "get", href: "<uri>" },
                },
            ],
            representment: {
                paymentId: "M2MJOG6O2Y",
                dateTime: "2024-07-02T15:30:00Z",
                currency: "AED",
                amount: 4999,
                status: "ready",
                responseCode: "A",
                responseMessage: "Transaction approved",
                link: { rel: "previous", method: "get", href: "<uri>" },
            },
            transactionResult: {
                type: "payment",
                status: "ready",
                authorizedAmount: 4999,
                currency: "USD",
                responseCode: "A",
                responseMessage: "NoError",
                processorResponseCode: "0",
            },
            customFields: [{ name: "yourCustomField", value: "abc123" }],
        };
        server
            .mockEndpoint()
            .post("/bank-transfer-payments")
            .header("Idempotency-Key", "8e03978e-40d5-43e8-bc93-6894a57f9324")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.payments.bankTransferPayments.create({
            "Idempotency-Key": "8e03978e-40d5-43e8-bc93-6894a57f9324",
            processingTerminalId: "1234001",
            order: {
                orderId: "OrderRef6543",
                description: "Large Pepperoni Pizza",
                amount: 4999,
                currency: "USD",
                breakdown: {
                    subtotal: 4347,
                    tip: {
                        type: "percentage",
                        percentage: 10,
                    },
                    taxes: [
                        {
                            type: "rate",
                            rate: 5,
                            name: "Sales Tax",
                        },
                    ],
                },
            },
            customer: {
                notificationLanguage: "en",
                contactMethods: [
                    {
                        type: "email",
                        value: "jane.doe@example.com",
                    },
                ],
            },
            credentialOnFile: {
                tokenize: true,
            },
            paymentMethod: {
                type: "ach",
                nameOnAccount: "Shara Hazel Hopper",
                accountNumber: "1234567890",
                routingNumber: "123456789",
            },
            customFields: [
                {
                    name: "yourCustomField",
                    value: "abc123",
                },
            ],
        });
        expect(response).toEqual({
            paymentId: "M2MJOG6O2Y",
            processingTerminalId: "1234001",
            order: {
                orderId: "OrderRef6543",
                dateTime: "2024-07-02T15:30:00Z",
                description: "Large Pepperoni Pizza",
                amount: 4999,
                currency: "USD",
                breakdown: {
                    subtotal: 4347,
                    tip: {
                        type: "percentage",
                        amount: 435,
                        percentage: 10,
                    },
                    taxes: [
                        {
                            name: "Sales Tax",
                            rate: 5,
                            amount: 217,
                        },
                    ],
                },
            },
            customer: {
                notificationLanguage: "en",
                contactMethods: [
                    {
                        type: "email",
                        value: "jane.doe@example.com",
                    },
                ],
            },
            bankAccount: {
                type: "ach",
                secCode: "web",
                nameOnAccount: "Sarah Hazel Hopper",
                accountNumber: "123456789",
                routingNumber: "123456789",
                secureToken: {
                    secureTokenId: "MREF_abc1de23-f4a5-6789-bcd0-12e345678901fa",
                    customerName: "Sarah Hazel Hopper",
                    token: "296753123456",
                    status: "notValidated",
                    link: {
                        rel: "previous",
                        method: "get",
                        href: "<uri>",
                    },
                },
            },
            refunds: [
                {
                    refundId: "CD3HN88U9F",
                    dateTime: "2024-07-14T12:25:00Z",
                    currency: "AED",
                    amount: 4999,
                    status: "ready",
                    responseCode: "A",
                    responseMessage: "Transaction refunded",
                    link: {
                        rel: "previous",
                        method: "get",
                        href: "<uri>",
                    },
                },
            ],
            returns: [
                {
                    paymentId: "M2MJOG6O2Y",
                    date: "2024-07-02",
                    returnCode: "R11",
                    returnReason: "Customer advises not authorized",
                    represented: false,
                    link: {
                        rel: "previous",
                        method: "get",
                        href: "<uri>",
                    },
                },
            ],
            representment: {
                paymentId: "M2MJOG6O2Y",
                dateTime: "2024-07-02T15:30:00Z",
                currency: "AED",
                amount: 4999,
                status: "ready",
                responseCode: "A",
                responseMessage: "Transaction approved",
                link: {
                    rel: "previous",
                    method: "get",
                    href: "<uri>",
                },
            },
            transactionResult: {
                type: "payment",
                status: "ready",
                authorizedAmount: 4999,
                currency: "USD",
                responseCode: "A",
                responseMessage: "NoError",
                processorResponseCode: "0",
            },
            customFields: [
                {
                    name: "yourCustomField",
                    value: "abc123",
                },
            ],
        });
    });

    test("create (2)", async () => {
        const server = mockServerPool.createServer();
        mockBearer(server);

        const client = new PayrocClient({
            maxRetries: 0,
            apiKey: "x-api-key",
            environment: { api: server.baseUrl, identity: server.baseUrl },
        });
        const rawRequestBody = {
            processingTerminalId: "buzz",
            order: {},
            paymentMethod: { type: "ach", nameOnAccount: "x", accountNumber: "buzz", routingNumber: "nectarine" },
        };
        const rawResponseBody = { type: "type", title: "title", status: 1, detail: "detail" };
        server
            .mockEndpoint()
            .post("/bank-transfer-payments")
            .header("Idempotency-Key", "idempotencyKey")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.payments.bankTransferPayments.create({
                "Idempotency-Key": "idempotencyKey",
                processingTerminalId: "buzz",
                order: {},
                paymentMethod: {
                    type: "ach",
                    nameOnAccount: "x",
                    accountNumber: "buzz",
                    routingNumber: "nectarine",
                },
            });
        }).rejects.toThrow(Payroc.BadRequestError);
    });

    test("create (3)", async () => {
        const server = mockServerPool.createServer();
        mockBearer(server);

        const client = new PayrocClient({
            maxRetries: 0,
            apiKey: "x-api-key",
            environment: { api: server.baseUrl, identity: server.baseUrl },
        });
        const rawRequestBody = {
            processingTerminalId: "buzz",
            order: {},
            paymentMethod: { type: "ach", nameOnAccount: "x", accountNumber: "buzz", routingNumber: "nectarine" },
        };
        const rawResponseBody = { type: "type", title: "title", status: 1, detail: "detail" };
        server
            .mockEndpoint()
            .post("/bank-transfer-payments")
            .header("Idempotency-Key", "idempotencyKey")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(401)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.payments.bankTransferPayments.create({
                "Idempotency-Key": "idempotencyKey",
                processingTerminalId: "buzz",
                order: {},
                paymentMethod: {
                    type: "ach",
                    nameOnAccount: "x",
                    accountNumber: "buzz",
                    routingNumber: "nectarine",
                },
            });
        }).rejects.toThrow(Payroc.UnauthorizedError);
    });

    test("create (4)", async () => {
        const server = mockServerPool.createServer();
        mockBearer(server);

        const client = new PayrocClient({
            maxRetries: 0,
            apiKey: "x-api-key",
            environment: { api: server.baseUrl, identity: server.baseUrl },
        });
        const rawRequestBody = {
            processingTerminalId: "buzz",
            order: {},
            paymentMethod: { type: "ach", nameOnAccount: "x", accountNumber: "buzz", routingNumber: "nectarine" },
        };
        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .post("/bank-transfer-payments")
            .header("Idempotency-Key", "idempotencyKey")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(403)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.payments.bankTransferPayments.create({
                "Idempotency-Key": "idempotencyKey",
                processingTerminalId: "buzz",
                order: {},
                paymentMethod: {
                    type: "ach",
                    nameOnAccount: "x",
                    accountNumber: "buzz",
                    routingNumber: "nectarine",
                },
            });
        }).rejects.toThrow(Payroc.ForbiddenError);
    });

    test("create (5)", async () => {
        const server = mockServerPool.createServer();
        mockBearer(server);

        const client = new PayrocClient({
            maxRetries: 0,
            apiKey: "x-api-key",
            environment: { api: server.baseUrl, identity: server.baseUrl },
        });
        const rawRequestBody = {
            processingTerminalId: "buzz",
            order: {},
            paymentMethod: { type: "ach", nameOnAccount: "x", accountNumber: "buzz", routingNumber: "nectarine" },
        };
        const rawResponseBody = { type: "type", title: "title", status: 1, detail: "detail" };
        server
            .mockEndpoint()
            .post("/bank-transfer-payments")
            .header("Idempotency-Key", "idempotencyKey")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(406)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.payments.bankTransferPayments.create({
                "Idempotency-Key": "idempotencyKey",
                processingTerminalId: "buzz",
                order: {},
                paymentMethod: {
                    type: "ach",
                    nameOnAccount: "x",
                    accountNumber: "buzz",
                    routingNumber: "nectarine",
                },
            });
        }).rejects.toThrow(Payroc.NotAcceptableError);
    });

    test("create (6)", async () => {
        const server = mockServerPool.createServer();
        mockBearer(server);

        const client = new PayrocClient({
            maxRetries: 0,
            apiKey: "x-api-key",
            environment: { api: server.baseUrl, identity: server.baseUrl },
        });
        const rawRequestBody = {
            processingTerminalId: "buzz",
            order: {},
            paymentMethod: { type: "ach", nameOnAccount: "x", accountNumber: "buzz", routingNumber: "nectarine" },
        };
        const rawResponseBody = { type: "type", title: "title", status: 1, detail: "detail" };
        server
            .mockEndpoint()
            .post("/bank-transfer-payments")
            .header("Idempotency-Key", "idempotencyKey")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(409)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.payments.bankTransferPayments.create({
                "Idempotency-Key": "idempotencyKey",
                processingTerminalId: "buzz",
                order: {},
                paymentMethod: {
                    type: "ach",
                    nameOnAccount: "x",
                    accountNumber: "buzz",
                    routingNumber: "nectarine",
                },
            });
        }).rejects.toThrow(Payroc.ConflictError);
    });

    test("create (7)", async () => {
        const server = mockServerPool.createServer();
        mockBearer(server);

        const client = new PayrocClient({
            maxRetries: 0,
            apiKey: "x-api-key",
            environment: { api: server.baseUrl, identity: server.baseUrl },
        });
        const rawRequestBody = {
            processingTerminalId: "buzz",
            order: {},
            paymentMethod: { type: "ach", nameOnAccount: "x", accountNumber: "buzz", routingNumber: "nectarine" },
        };
        const rawResponseBody = { type: "type", title: "title", status: 1, detail: "detail" };
        server
            .mockEndpoint()
            .post("/bank-transfer-payments")
            .header("Idempotency-Key", "idempotencyKey")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(415)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.payments.bankTransferPayments.create({
                "Idempotency-Key": "idempotencyKey",
                processingTerminalId: "buzz",
                order: {},
                paymentMethod: {
                    type: "ach",
                    nameOnAccount: "x",
                    accountNumber: "buzz",
                    routingNumber: "nectarine",
                },
            });
        }).rejects.toThrow(Payroc.UnsupportedMediaTypeError);
    });

    test("create (8)", async () => {
        const server = mockServerPool.createServer();
        mockBearer(server);

        const client = new PayrocClient({
            maxRetries: 0,
            apiKey: "x-api-key",
            environment: { api: server.baseUrl, identity: server.baseUrl },
        });
        const rawRequestBody = {
            processingTerminalId: "buzz",
            order: {},
            paymentMethod: { type: "ach", nameOnAccount: "x", accountNumber: "buzz", routingNumber: "nectarine" },
        };
        const rawResponseBody = { type: "type", title: "title", status: 1, detail: "detail" };
        server
            .mockEndpoint()
            .post("/bank-transfer-payments")
            .header("Idempotency-Key", "idempotencyKey")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(500)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.payments.bankTransferPayments.create({
                "Idempotency-Key": "idempotencyKey",
                processingTerminalId: "buzz",
                order: {},
                paymentMethod: {
                    type: "ach",
                    nameOnAccount: "x",
                    accountNumber: "buzz",
                    routingNumber: "nectarine",
                },
            });
        }).rejects.toThrow(Payroc.InternalServerError);
    });

    test("retrieve (1)", async () => {
        const server = mockServerPool.createServer();
        mockBearer(server);

        const client = new PayrocClient({
            maxRetries: 0,
            apiKey: "x-api-key",
            environment: { api: server.baseUrl, identity: server.baseUrl },
        });

        const rawResponseBody = {
            paymentId: "M2MJOG6O2Y",
            processingTerminalId: "1234001",
            order: {
                orderId: "OrderRef6543",
                dateTime: "2024-07-02T15:30:00Z",
                description: "Large Pepperoni Pizza",
                amount: 4999,
                currency: "USD",
                breakdown: {
                    subtotal: 4347,
                    tip: { type: "percentage", amount: 435, percentage: 10 },
                    taxes: [{ name: "Sales Tax", rate: 5, amount: 217 }],
                },
            },
            customer: {
                notificationLanguage: "en",
                contactMethods: [{ type: "email", value: "jane.doe@example.com" }],
            },
            bankAccount: {
                type: "ach",
                secCode: "web",
                nameOnAccount: "Sarah Hazel Hopper",
                accountNumber: "123456789",
                routingNumber: "123456789",
                secureToken: {
                    secureTokenId: "MREF_abc1de23-f4a5-6789-bcd0-12e345678901fa",
                    customerName: "Sarah Hazel Hopper",
                    token: "296753123456",
                    status: "notValidated",
                    link: { rel: "previous", method: "get", href: "<uri>" },
                },
            },
            refunds: [
                {
                    refundId: "CD3HN88U9F",
                    dateTime: "2024-07-14T12:25:00Z",
                    currency: "AED",
                    amount: 4999,
                    status: "ready",
                    responseCode: "A",
                    responseMessage: "Transaction refunded",
                    link: { rel: "previous", method: "get", href: "<uri>" },
                },
            ],
            returns: [
                {
                    paymentId: "M2MJOG6O2Y",
                    date: "2024-07-02",
                    returnCode: "R11",
                    returnReason: "Customer advises not authorized",
                    represented: false,
                    link: { rel: "previous", method: "get", href: "<uri>" },
                },
            ],
            representment: {
                paymentId: "M2MJOG6O2Y",
                dateTime: "2024-07-02T15:30:00Z",
                currency: "AED",
                amount: 4999,
                status: "ready",
                responseCode: "A",
                responseMessage: "Transaction approved",
                link: { rel: "previous", method: "get", href: "<uri>" },
            },
            transactionResult: {
                type: "payment",
                status: "ready",
                authorizedAmount: 4999,
                currency: "USD",
                responseCode: "A",
                responseMessage: "NoError",
                processorResponseCode: "0",
            },
            customFields: [{ name: "yourCustomField", value: "abc123" }],
        };
        server
            .mockEndpoint()
            .get("/bank-transfer-payments/M2MJOG6O2Y")
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.payments.bankTransferPayments.retrieve({
            paymentId: "M2MJOG6O2Y",
        });
        expect(response).toEqual({
            paymentId: "M2MJOG6O2Y",
            processingTerminalId: "1234001",
            order: {
                orderId: "OrderRef6543",
                dateTime: "2024-07-02T15:30:00Z",
                description: "Large Pepperoni Pizza",
                amount: 4999,
                currency: "USD",
                breakdown: {
                    subtotal: 4347,
                    tip: {
                        type: "percentage",
                        amount: 435,
                        percentage: 10,
                    },
                    taxes: [
                        {
                            name: "Sales Tax",
                            rate: 5,
                            amount: 217,
                        },
                    ],
                },
            },
            customer: {
                notificationLanguage: "en",
                contactMethods: [
                    {
                        type: "email",
                        value: "jane.doe@example.com",
                    },
                ],
            },
            bankAccount: {
                type: "ach",
                secCode: "web",
                nameOnAccount: "Sarah Hazel Hopper",
                accountNumber: "123456789",
                routingNumber: "123456789",
                secureToken: {
                    secureTokenId: "MREF_abc1de23-f4a5-6789-bcd0-12e345678901fa",
                    customerName: "Sarah Hazel Hopper",
                    token: "296753123456",
                    status: "notValidated",
                    link: {
                        rel: "previous",
                        method: "get",
                        href: "<uri>",
                    },
                },
            },
            refunds: [
                {
                    refundId: "CD3HN88U9F",
                    dateTime: "2024-07-14T12:25:00Z",
                    currency: "AED",
                    amount: 4999,
                    status: "ready",
                    responseCode: "A",
                    responseMessage: "Transaction refunded",
                    link: {
                        rel: "previous",
                        method: "get",
                        href: "<uri>",
                    },
                },
            ],
            returns: [
                {
                    paymentId: "M2MJOG6O2Y",
                    date: "2024-07-02",
                    returnCode: "R11",
                    returnReason: "Customer advises not authorized",
                    represented: false,
                    link: {
                        rel: "previous",
                        method: "get",
                        href: "<uri>",
                    },
                },
            ],
            representment: {
                paymentId: "M2MJOG6O2Y",
                dateTime: "2024-07-02T15:30:00Z",
                currency: "AED",
                amount: 4999,
                status: "ready",
                responseCode: "A",
                responseMessage: "Transaction approved",
                link: {
                    rel: "previous",
                    method: "get",
                    href: "<uri>",
                },
            },
            transactionResult: {
                type: "payment",
                status: "ready",
                authorizedAmount: 4999,
                currency: "USD",
                responseCode: "A",
                responseMessage: "NoError",
                processorResponseCode: "0",
            },
            customFields: [
                {
                    name: "yourCustomField",
                    value: "abc123",
                },
            ],
        });
    });

    test("retrieve (2)", async () => {
        const server = mockServerPool.createServer();
        mockBearer(server);

        const client = new PayrocClient({
            maxRetries: 0,
            apiKey: "x-api-key",
            environment: { api: server.baseUrl, identity: server.baseUrl },
        });

        const rawResponseBody = { type: "type", title: "title", status: 1, detail: "detail" };
        server
            .mockEndpoint()
            .get("/bank-transfer-payments/paymentId")
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.payments.bankTransferPayments.retrieve({
                paymentId: "paymentId",
            });
        }).rejects.toThrow(Payroc.BadRequestError);
    });

    test("retrieve (3)", async () => {
        const server = mockServerPool.createServer();
        mockBearer(server);

        const client = new PayrocClient({
            maxRetries: 0,
            apiKey: "x-api-key",
            environment: { api: server.baseUrl, identity: server.baseUrl },
        });

        const rawResponseBody = { type: "type", title: "title", status: 1, detail: "detail" };
        server
            .mockEndpoint()
            .get("/bank-transfer-payments/paymentId")
            .respondWith()
            .statusCode(401)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.payments.bankTransferPayments.retrieve({
                paymentId: "paymentId",
            });
        }).rejects.toThrow(Payroc.UnauthorizedError);
    });

    test("retrieve (4)", async () => {
        const server = mockServerPool.createServer();
        mockBearer(server);

        const client = new PayrocClient({
            maxRetries: 0,
            apiKey: "x-api-key",
            environment: { api: server.baseUrl, identity: server.baseUrl },
        });

        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .get("/bank-transfer-payments/paymentId")
            .respondWith()
            .statusCode(403)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.payments.bankTransferPayments.retrieve({
                paymentId: "paymentId",
            });
        }).rejects.toThrow(Payroc.ForbiddenError);
    });

    test("retrieve (5)", async () => {
        const server = mockServerPool.createServer();
        mockBearer(server);

        const client = new PayrocClient({
            maxRetries: 0,
            apiKey: "x-api-key",
            environment: { api: server.baseUrl, identity: server.baseUrl },
        });

        const rawResponseBody = { type: "type", title: "title", status: 1, detail: "detail" };
        server
            .mockEndpoint()
            .get("/bank-transfer-payments/paymentId")
            .respondWith()
            .statusCode(404)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.payments.bankTransferPayments.retrieve({
                paymentId: "paymentId",
            });
        }).rejects.toThrow(Payroc.NotFoundError);
    });

    test("retrieve (6)", async () => {
        const server = mockServerPool.createServer();
        mockBearer(server);

        const client = new PayrocClient({
            maxRetries: 0,
            apiKey: "x-api-key",
            environment: { api: server.baseUrl, identity: server.baseUrl },
        });

        const rawResponseBody = { type: "type", title: "title", status: 1, detail: "detail" };
        server
            .mockEndpoint()
            .get("/bank-transfer-payments/paymentId")
            .respondWith()
            .statusCode(406)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.payments.bankTransferPayments.retrieve({
                paymentId: "paymentId",
            });
        }).rejects.toThrow(Payroc.NotAcceptableError);
    });

    test("retrieve (7)", async () => {
        const server = mockServerPool.createServer();
        mockBearer(server);

        const client = new PayrocClient({
            maxRetries: 0,
            apiKey: "x-api-key",
            environment: { api: server.baseUrl, identity: server.baseUrl },
        });

        const rawResponseBody = { type: "type", title: "title", status: 1, detail: "detail" };
        server
            .mockEndpoint()
            .get("/bank-transfer-payments/paymentId")
            .respondWith()
            .statusCode(500)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.payments.bankTransferPayments.retrieve({
                paymentId: "paymentId",
            });
        }).rejects.toThrow(Payroc.InternalServerError);
    });

    test("reverse (1)", async () => {
        const server = mockServerPool.createServer();
        mockBearer(server);

        const client = new PayrocClient({
            maxRetries: 0,
            apiKey: "x-api-key",
            environment: { api: server.baseUrl, identity: server.baseUrl },
        });

        const rawResponseBody = {
            paymentId: "M2MJOG6O2Y",
            processingTerminalId: "1234001",
            order: {
                orderId: "OrderRef6543",
                dateTime: "2024-07-02T15:30:00Z",
                description: "Large Pepperoni Pizza",
                amount: 4999,
                currency: "USD",
                breakdown: {
                    subtotal: 4347,
                    tip: { type: "percentage", amount: 500, percentage: 10 },
                    taxes: [{ name: "VAT", rate: 5, amount: 217 }],
                },
            },
            customer: {
                notificationLanguage: "en",
                contactMethods: [{ type: "email", value: "jane.doe@example.com" }],
            },
            bankAccount: {
                type: "pad",
                nameOnAccount: "Sarah Hazel Hopper",
                accountNumber: "1234567890",
                transitNumber: "76543",
                institutionNumber: "543",
                secureToken: {
                    secureTokenId: "MREF_abc1de23-f4a5-6789-bcd0-12e345678901fa",
                    customerName: "Sarah Hazel Hopper",
                    token: "296753123456",
                    status: "notValidated",
                    link: { rel: "previous", method: "get", href: "<uri>" },
                },
            },
            refunds: [
                {
                    refundId: "CD3HN88U9F",
                    dateTime: "2024-07-14T12:25:00Z",
                    currency: "AED",
                    amount: 4999,
                    status: "ready",
                    responseCode: "A",
                    responseMessage: "Transaction refunded",
                    link: { rel: "previous", method: "get", href: "<uri>" },
                },
            ],
            returns: [
                {
                    paymentId: "M2MJOG6O2Y",
                    date: "2024-07-02",
                    returnCode: "R11",
                    returnReason: "Customer advises not authorized",
                    represented: false,
                    link: { rel: "previous", method: "get", href: "<uri>" },
                },
            ],
            representment: {
                paymentId: "M2MJOG6O2Y",
                dateTime: "2024-07-02T15:30:00Z",
                currency: "AED",
                amount: 4999,
                status: "ready",
                responseCode: "A",
                responseMessage: "Transaction approved",
                link: { rel: "previous", method: "get", href: "<uri>" },
            },
            transactionResult: {
                type: "payment",
                status: "reversal",
                authorizedAmount: 4999,
                currency: "USD",
                responseCode: "A",
                responseMessage: "Payment Approved",
                processorResponseCode: "A",
            },
            customFields: [{ name: "yourCustomField", value: "abc123" }],
        };
        server
            .mockEndpoint()
            .post("/bank-transfer-payments/M2MJOG6O2Y/reverse")
            .header("Idempotency-Key", "8e03978e-40d5-43e8-bc93-6894a57f9324")
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.payments.bankTransferPayments.reverse({
            "Idempotency-Key": "8e03978e-40d5-43e8-bc93-6894a57f9324",
            paymentId: "M2MJOG6O2Y",
        });
        expect(response).toEqual({
            paymentId: "M2MJOG6O2Y",
            processingTerminalId: "1234001",
            order: {
                orderId: "OrderRef6543",
                dateTime: "2024-07-02T15:30:00Z",
                description: "Large Pepperoni Pizza",
                amount: 4999,
                currency: "USD",
                breakdown: {
                    subtotal: 4347,
                    tip: {
                        type: "percentage",
                        amount: 500,
                        percentage: 10,
                    },
                    taxes: [
                        {
                            name: "VAT",
                            rate: 5,
                            amount: 217,
                        },
                    ],
                },
            },
            customer: {
                notificationLanguage: "en",
                contactMethods: [
                    {
                        type: "email",
                        value: "jane.doe@example.com",
                    },
                ],
            },
            bankAccount: {
                type: "pad",
                nameOnAccount: "Sarah Hazel Hopper",
                accountNumber: "1234567890",
                transitNumber: "76543",
                institutionNumber: "543",
                secureToken: {
                    secureTokenId: "MREF_abc1de23-f4a5-6789-bcd0-12e345678901fa",
                    customerName: "Sarah Hazel Hopper",
                    token: "296753123456",
                    status: "notValidated",
                    link: {
                        rel: "previous",
                        method: "get",
                        href: "<uri>",
                    },
                },
            },
            refunds: [
                {
                    refundId: "CD3HN88U9F",
                    dateTime: "2024-07-14T12:25:00Z",
                    currency: "AED",
                    amount: 4999,
                    status: "ready",
                    responseCode: "A",
                    responseMessage: "Transaction refunded",
                    link: {
                        rel: "previous",
                        method: "get",
                        href: "<uri>",
                    },
                },
            ],
            returns: [
                {
                    paymentId: "M2MJOG6O2Y",
                    date: "2024-07-02",
                    returnCode: "R11",
                    returnReason: "Customer advises not authorized",
                    represented: false,
                    link: {
                        rel: "previous",
                        method: "get",
                        href: "<uri>",
                    },
                },
            ],
            representment: {
                paymentId: "M2MJOG6O2Y",
                dateTime: "2024-07-02T15:30:00Z",
                currency: "AED",
                amount: 4999,
                status: "ready",
                responseCode: "A",
                responseMessage: "Transaction approved",
                link: {
                    rel: "previous",
                    method: "get",
                    href: "<uri>",
                },
            },
            transactionResult: {
                type: "payment",
                status: "reversal",
                authorizedAmount: 4999,
                currency: "USD",
                responseCode: "A",
                responseMessage: "Payment Approved",
                processorResponseCode: "A",
            },
            customFields: [
                {
                    name: "yourCustomField",
                    value: "abc123",
                },
            ],
        });
    });

    test("reverse (2)", async () => {
        const server = mockServerPool.createServer();
        mockBearer(server);

        const client = new PayrocClient({
            maxRetries: 0,
            apiKey: "x-api-key",
            environment: { api: server.baseUrl, identity: server.baseUrl },
        });

        const rawResponseBody = { type: "type", title: "title", status: 1, detail: "detail" };
        server
            .mockEndpoint()
            .post("/bank-transfer-payments/paymentId/reverse")
            .header("Idempotency-Key", "idempotencyKey")
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.payments.bankTransferPayments.reverse({
                "Idempotency-Key": "idempotencyKey",
                paymentId: "paymentId",
            });
        }).rejects.toThrow(Payroc.BadRequestError);
    });

    test("reverse (3)", async () => {
        const server = mockServerPool.createServer();
        mockBearer(server);

        const client = new PayrocClient({
            maxRetries: 0,
            apiKey: "x-api-key",
            environment: { api: server.baseUrl, identity: server.baseUrl },
        });

        const rawResponseBody = { type: "type", title: "title", status: 1, detail: "detail" };
        server
            .mockEndpoint()
            .post("/bank-transfer-payments/paymentId/reverse")
            .header("Idempotency-Key", "idempotencyKey")
            .respondWith()
            .statusCode(401)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.payments.bankTransferPayments.reverse({
                "Idempotency-Key": "idempotencyKey",
                paymentId: "paymentId",
            });
        }).rejects.toThrow(Payroc.UnauthorizedError);
    });

    test("reverse (4)", async () => {
        const server = mockServerPool.createServer();
        mockBearer(server);

        const client = new PayrocClient({
            maxRetries: 0,
            apiKey: "x-api-key",
            environment: { api: server.baseUrl, identity: server.baseUrl },
        });

        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .post("/bank-transfer-payments/paymentId/reverse")
            .header("Idempotency-Key", "idempotencyKey")
            .respondWith()
            .statusCode(403)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.payments.bankTransferPayments.reverse({
                "Idempotency-Key": "idempotencyKey",
                paymentId: "paymentId",
            });
        }).rejects.toThrow(Payroc.ForbiddenError);
    });

    test("reverse (5)", async () => {
        const server = mockServerPool.createServer();
        mockBearer(server);

        const client = new PayrocClient({
            maxRetries: 0,
            apiKey: "x-api-key",
            environment: { api: server.baseUrl, identity: server.baseUrl },
        });

        const rawResponseBody = { type: "type", title: "title", status: 1, detail: "detail" };
        server
            .mockEndpoint()
            .post("/bank-transfer-payments/paymentId/reverse")
            .header("Idempotency-Key", "idempotencyKey")
            .respondWith()
            .statusCode(404)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.payments.bankTransferPayments.reverse({
                "Idempotency-Key": "idempotencyKey",
                paymentId: "paymentId",
            });
        }).rejects.toThrow(Payroc.NotFoundError);
    });

    test("reverse (6)", async () => {
        const server = mockServerPool.createServer();
        mockBearer(server);

        const client = new PayrocClient({
            maxRetries: 0,
            apiKey: "x-api-key",
            environment: { api: server.baseUrl, identity: server.baseUrl },
        });

        const rawResponseBody = { type: "type", title: "title", status: 1, detail: "detail" };
        server
            .mockEndpoint()
            .post("/bank-transfer-payments/paymentId/reverse")
            .header("Idempotency-Key", "idempotencyKey")
            .respondWith()
            .statusCode(406)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.payments.bankTransferPayments.reverse({
                "Idempotency-Key": "idempotencyKey",
                paymentId: "paymentId",
            });
        }).rejects.toThrow(Payroc.NotAcceptableError);
    });

    test("reverse (7)", async () => {
        const server = mockServerPool.createServer();
        mockBearer(server);

        const client = new PayrocClient({
            maxRetries: 0,
            apiKey: "x-api-key",
            environment: { api: server.baseUrl, identity: server.baseUrl },
        });

        const rawResponseBody = { type: "type", title: "title", status: 1, detail: "detail" };
        server
            .mockEndpoint()
            .post("/bank-transfer-payments/paymentId/reverse")
            .header("Idempotency-Key", "idempotencyKey")
            .respondWith()
            .statusCode(409)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.payments.bankTransferPayments.reverse({
                "Idempotency-Key": "idempotencyKey",
                paymentId: "paymentId",
            });
        }).rejects.toThrow(Payroc.ConflictError);
    });

    test("reverse (8)", async () => {
        const server = mockServerPool.createServer();
        mockBearer(server);

        const client = new PayrocClient({
            maxRetries: 0,
            apiKey: "x-api-key",
            environment: { api: server.baseUrl, identity: server.baseUrl },
        });

        const rawResponseBody = { type: "type", title: "title", status: 1, detail: "detail" };
        server
            .mockEndpoint()
            .post("/bank-transfer-payments/paymentId/reverse")
            .header("Idempotency-Key", "idempotencyKey")
            .respondWith()
            .statusCode(415)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.payments.bankTransferPayments.reverse({
                "Idempotency-Key": "idempotencyKey",
                paymentId: "paymentId",
            });
        }).rejects.toThrow(Payroc.UnsupportedMediaTypeError);
    });

    test("reverse (9)", async () => {
        const server = mockServerPool.createServer();
        mockBearer(server);

        const client = new PayrocClient({
            maxRetries: 0,
            apiKey: "x-api-key",
            environment: { api: server.baseUrl, identity: server.baseUrl },
        });

        const rawResponseBody = { type: "type", title: "title", status: 1, detail: "detail" };
        server
            .mockEndpoint()
            .post("/bank-transfer-payments/paymentId/reverse")
            .header("Idempotency-Key", "idempotencyKey")
            .respondWith()
            .statusCode(500)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.payments.bankTransferPayments.reverse({
                "Idempotency-Key": "idempotencyKey",
                paymentId: "paymentId",
            });
        }).rejects.toThrow(Payroc.InternalServerError);
    });

    test("refund (1)", async () => {
        const server = mockServerPool.createServer();
        mockBearer(server);

        const client = new PayrocClient({
            maxRetries: 0,
            apiKey: "x-api-key",
            environment: { api: server.baseUrl, identity: server.baseUrl },
        });
        const rawRequestBody = { amount: 4999, description: "amount to refund" };
        const rawResponseBody = {
            paymentId: "M2MJOG6O2Y",
            processingTerminalId: "1234001",
            order: {
                orderId: "OrderRef6543",
                dateTime: "2024-07-02T15:30:00Z",
                description: "Refund for order OrderRef6543",
                amount: 4999,
                currency: "USD",
                breakdown: {
                    subtotal: 4347,
                    tip: { type: "percentage", amount: 435, percentage: 10 },
                    taxes: [{ name: "Sales Tax", rate: 5, amount: 217 }],
                },
            },
            customer: {
                notificationLanguage: "en",
                contactMethods: [{ type: "email", value: "jane.doe@example.com" }],
            },
            bankAccount: {
                type: "pad",
                nameOnAccount: "Sarah Hazel Hopper",
                accountNumber: "1234567890",
                transitNumber: "76543",
                institutionNumber: "543",
                secureToken: {
                    secureTokenId: "MREF_abc1de23-f4a5-6789-bcd0-12e345678901fa",
                    customerName: "Sarah Hazel Hopper",
                    token: "296753123456",
                    status: "notValidated",
                    link: { rel: "previous", method: "get", href: "<uri>" },
                },
            },
            refunds: [
                {
                    refundId: "CD3HN88U9F",
                    dateTime: "2024-07-14T12:25:00Z",
                    currency: "AED",
                    amount: 4999,
                    status: "ready",
                    responseCode: "A",
                    responseMessage: "Transaction refunded",
                    link: { rel: "previous", method: "get", href: "<uri>" },
                },
            ],
            returns: [
                {
                    paymentId: "M2MJOG6O2Y",
                    date: "2024-07-02",
                    returnCode: "R11",
                    returnReason: "Customer advises not authorized",
                    represented: false,
                    link: { rel: "previous", method: "get", href: "<uri>" },
                },
            ],
            representment: {
                paymentId: "M2MJOG6O2Y",
                dateTime: "2024-07-02T15:30:00Z",
                currency: "AED",
                amount: 4999,
                status: "ready",
                responseCode: "A",
                responseMessage: "Transaction approved",
                link: { rel: "previous", method: "get", href: "<uri>" },
            },
            transactionResult: {
                type: "payment",
                status: "reversal",
                authorizedAmount: 4999,
                currency: "USD",
                responseCode: "A",
                responseMessage: "Payment Approved",
                processorResponseCode: "A",
            },
            customFields: [{ name: "yourCustomField", value: "abc123" }],
        };
        server
            .mockEndpoint()
            .post("/bank-transfer-payments/M2MJOG6O2Y/refund")
            .header("Idempotency-Key", "8e03978e-40d5-43e8-bc93-6894a57f9324")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.payments.bankTransferPayments.refund({
            "Idempotency-Key": "8e03978e-40d5-43e8-bc93-6894a57f9324",
            paymentId: "M2MJOG6O2Y",
            amount: 4999,
            description: "amount to refund",
        });
        expect(response).toEqual({
            paymentId: "M2MJOG6O2Y",
            processingTerminalId: "1234001",
            order: {
                orderId: "OrderRef6543",
                dateTime: "2024-07-02T15:30:00Z",
                description: "Refund for order OrderRef6543",
                amount: 4999,
                currency: "USD",
                breakdown: {
                    subtotal: 4347,
                    tip: {
                        type: "percentage",
                        amount: 435,
                        percentage: 10,
                    },
                    taxes: [
                        {
                            name: "Sales Tax",
                            rate: 5,
                            amount: 217,
                        },
                    ],
                },
            },
            customer: {
                notificationLanguage: "en",
                contactMethods: [
                    {
                        type: "email",
                        value: "jane.doe@example.com",
                    },
                ],
            },
            bankAccount: {
                type: "pad",
                nameOnAccount: "Sarah Hazel Hopper",
                accountNumber: "1234567890",
                transitNumber: "76543",
                institutionNumber: "543",
                secureToken: {
                    secureTokenId: "MREF_abc1de23-f4a5-6789-bcd0-12e345678901fa",
                    customerName: "Sarah Hazel Hopper",
                    token: "296753123456",
                    status: "notValidated",
                    link: {
                        rel: "previous",
                        method: "get",
                        href: "<uri>",
                    },
                },
            },
            refunds: [
                {
                    refundId: "CD3HN88U9F",
                    dateTime: "2024-07-14T12:25:00Z",
                    currency: "AED",
                    amount: 4999,
                    status: "ready",
                    responseCode: "A",
                    responseMessage: "Transaction refunded",
                    link: {
                        rel: "previous",
                        method: "get",
                        href: "<uri>",
                    },
                },
            ],
            returns: [
                {
                    paymentId: "M2MJOG6O2Y",
                    date: "2024-07-02",
                    returnCode: "R11",
                    returnReason: "Customer advises not authorized",
                    represented: false,
                    link: {
                        rel: "previous",
                        method: "get",
                        href: "<uri>",
                    },
                },
            ],
            representment: {
                paymentId: "M2MJOG6O2Y",
                dateTime: "2024-07-02T15:30:00Z",
                currency: "AED",
                amount: 4999,
                status: "ready",
                responseCode: "A",
                responseMessage: "Transaction approved",
                link: {
                    rel: "previous",
                    method: "get",
                    href: "<uri>",
                },
            },
            transactionResult: {
                type: "payment",
                status: "reversal",
                authorizedAmount: 4999,
                currency: "USD",
                responseCode: "A",
                responseMessage: "Payment Approved",
                processorResponseCode: "A",
            },
            customFields: [
                {
                    name: "yourCustomField",
                    value: "abc123",
                },
            ],
        });
    });

    test("refund (2)", async () => {
        const server = mockServerPool.createServer();
        mockBearer(server);

        const client = new PayrocClient({
            maxRetries: 0,
            apiKey: "x-api-key",
            environment: { api: server.baseUrl, identity: server.baseUrl },
        });
        const rawRequestBody = { amount: 1000000, description: "x" };
        const rawResponseBody = { type: "type", title: "title", status: 1, detail: "detail" };
        server
            .mockEndpoint()
            .post("/bank-transfer-payments/paymentId/refund")
            .header("Idempotency-Key", "idempotencyKey")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.payments.bankTransferPayments.refund({
                "Idempotency-Key": "idempotencyKey",
                paymentId: "paymentId",
                amount: 1000000,
                description: "x",
            });
        }).rejects.toThrow(Payroc.BadRequestError);
    });

    test("refund (3)", async () => {
        const server = mockServerPool.createServer();
        mockBearer(server);

        const client = new PayrocClient({
            maxRetries: 0,
            apiKey: "x-api-key",
            environment: { api: server.baseUrl, identity: server.baseUrl },
        });
        const rawRequestBody = { amount: 1000000, description: "x" };
        const rawResponseBody = { type: "type", title: "title", status: 1, detail: "detail" };
        server
            .mockEndpoint()
            .post("/bank-transfer-payments/paymentId/refund")
            .header("Idempotency-Key", "idempotencyKey")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(401)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.payments.bankTransferPayments.refund({
                "Idempotency-Key": "idempotencyKey",
                paymentId: "paymentId",
                amount: 1000000,
                description: "x",
            });
        }).rejects.toThrow(Payroc.UnauthorizedError);
    });

    test("refund (4)", async () => {
        const server = mockServerPool.createServer();
        mockBearer(server);

        const client = new PayrocClient({
            maxRetries: 0,
            apiKey: "x-api-key",
            environment: { api: server.baseUrl, identity: server.baseUrl },
        });
        const rawRequestBody = { amount: 1000000, description: "x" };
        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .post("/bank-transfer-payments/paymentId/refund")
            .header("Idempotency-Key", "idempotencyKey")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(403)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.payments.bankTransferPayments.refund({
                "Idempotency-Key": "idempotencyKey",
                paymentId: "paymentId",
                amount: 1000000,
                description: "x",
            });
        }).rejects.toThrow(Payroc.ForbiddenError);
    });

    test("refund (5)", async () => {
        const server = mockServerPool.createServer();
        mockBearer(server);

        const client = new PayrocClient({
            maxRetries: 0,
            apiKey: "x-api-key",
            environment: { api: server.baseUrl, identity: server.baseUrl },
        });
        const rawRequestBody = { amount: 1000000, description: "x" };
        const rawResponseBody = { type: "type", title: "title", status: 1, detail: "detail" };
        server
            .mockEndpoint()
            .post("/bank-transfer-payments/paymentId/refund")
            .header("Idempotency-Key", "idempotencyKey")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(404)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.payments.bankTransferPayments.refund({
                "Idempotency-Key": "idempotencyKey",
                paymentId: "paymentId",
                amount: 1000000,
                description: "x",
            });
        }).rejects.toThrow(Payroc.NotFoundError);
    });

    test("refund (6)", async () => {
        const server = mockServerPool.createServer();
        mockBearer(server);

        const client = new PayrocClient({
            maxRetries: 0,
            apiKey: "x-api-key",
            environment: { api: server.baseUrl, identity: server.baseUrl },
        });
        const rawRequestBody = { amount: 1000000, description: "x" };
        const rawResponseBody = { type: "type", title: "title", status: 1, detail: "detail" };
        server
            .mockEndpoint()
            .post("/bank-transfer-payments/paymentId/refund")
            .header("Idempotency-Key", "idempotencyKey")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(406)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.payments.bankTransferPayments.refund({
                "Idempotency-Key": "idempotencyKey",
                paymentId: "paymentId",
                amount: 1000000,
                description: "x",
            });
        }).rejects.toThrow(Payroc.NotAcceptableError);
    });

    test("refund (7)", async () => {
        const server = mockServerPool.createServer();
        mockBearer(server);

        const client = new PayrocClient({
            maxRetries: 0,
            apiKey: "x-api-key",
            environment: { api: server.baseUrl, identity: server.baseUrl },
        });
        const rawRequestBody = { amount: 1000000, description: "x" };
        const rawResponseBody = { type: "type", title: "title", status: 1, detail: "detail" };
        server
            .mockEndpoint()
            .post("/bank-transfer-payments/paymentId/refund")
            .header("Idempotency-Key", "idempotencyKey")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(409)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.payments.bankTransferPayments.refund({
                "Idempotency-Key": "idempotencyKey",
                paymentId: "paymentId",
                amount: 1000000,
                description: "x",
            });
        }).rejects.toThrow(Payroc.ConflictError);
    });

    test("refund (8)", async () => {
        const server = mockServerPool.createServer();
        mockBearer(server);

        const client = new PayrocClient({
            maxRetries: 0,
            apiKey: "x-api-key",
            environment: { api: server.baseUrl, identity: server.baseUrl },
        });
        const rawRequestBody = { amount: 1000000, description: "x" };
        const rawResponseBody = { type: "type", title: "title", status: 1, detail: "detail" };
        server
            .mockEndpoint()
            .post("/bank-transfer-payments/paymentId/refund")
            .header("Idempotency-Key", "idempotencyKey")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(415)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.payments.bankTransferPayments.refund({
                "Idempotency-Key": "idempotencyKey",
                paymentId: "paymentId",
                amount: 1000000,
                description: "x",
            });
        }).rejects.toThrow(Payroc.UnsupportedMediaTypeError);
    });

    test("refund (9)", async () => {
        const server = mockServerPool.createServer();
        mockBearer(server);

        const client = new PayrocClient({
            maxRetries: 0,
            apiKey: "x-api-key",
            environment: { api: server.baseUrl, identity: server.baseUrl },
        });
        const rawRequestBody = { amount: 1000000, description: "x" };
        const rawResponseBody = { type: "type", title: "title", status: 1, detail: "detail" };
        server
            .mockEndpoint()
            .post("/bank-transfer-payments/paymentId/refund")
            .header("Idempotency-Key", "idempotencyKey")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(500)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.payments.bankTransferPayments.refund({
                "Idempotency-Key": "idempotencyKey",
                paymentId: "paymentId",
                amount: 1000000,
                description: "x",
            });
        }).rejects.toThrow(Payroc.InternalServerError);
    });

    test("represent (1)", async () => {
        const server = mockServerPool.createServer();
        mockBearer(server);

        const client = new PayrocClient({
            maxRetries: 0,
            apiKey: "x-api-key",
            environment: { api: server.baseUrl, identity: server.baseUrl },
        });
        const rawRequestBody = {
            paymentMethod: {
                type: "ach",
                nameOnAccount: "Shara Hazel Hopper",
                accountNumber: "1234567890",
                routingNumber: "123456789",
            },
        };
        const rawResponseBody = {
            paymentId: "M2MJOG6O2Y",
            processingTerminalId: "1234001",
            order: {
                orderId: "OrderRef6543",
                dateTime: "2024-07-02T15:30:00Z",
                description: "Large Pepperoni Pizza",
                amount: 4999,
                currency: "USD",
                breakdown: {
                    subtotal: 4347,
                    tip: { type: "percentage", amount: 435, percentage: 10 },
                    taxes: [{ name: "Sales Tax", rate: 5, amount: 217 }],
                },
            },
            customer: {
                notificationLanguage: "en",
                contactMethods: [{ type: "email", value: "jane.doe@example.com" }],
            },
            bankAccount: {
                type: "ach",
                secCode: "web",
                nameOnAccount: "Sarah Hazel Hopper",
                accountNumber: "123456789",
                routingNumber: "123456789",
                secureToken: {
                    secureTokenId: "MREF_abc1de23-f4a5-6789-bcd0-12e345678901fa",
                    customerName: "Sarah Hazel Hopper",
                    token: "296753123456",
                    status: "notValidated",
                    link: { rel: "previous", method: "get", href: "<uri>" },
                },
            },
            refunds: [
                {
                    refundId: "CD3HN88U9F",
                    dateTime: "2024-07-14T12:25:00Z",
                    currency: "AED",
                    amount: 4999,
                    status: "ready",
                    responseCode: "A",
                    responseMessage: "Transaction refunded",
                    link: { rel: "previous", method: "get", href: "<uri>" },
                },
            ],
            returns: [
                {
                    paymentId: "M2MJOG6O2Y",
                    date: "2024-07-02",
                    returnCode: "R11",
                    returnReason: "Customer advises not authorized",
                    represented: false,
                    link: { rel: "previous", method: "get", href: "<uri>" },
                },
            ],
            representment: {
                paymentId: "M2MJOG6O2Y",
                dateTime: "2024-07-02T15:30:00Z",
                currency: "AED",
                amount: 4999,
                status: "ready",
                responseCode: "A",
                responseMessage: "Transaction approved",
                link: { rel: "previous", method: "get", href: "<uri>" },
            },
            transactionResult: {
                type: "payment",
                status: "ready",
                authorizedAmount: 4999,
                currency: "USD",
                responseCode: "A",
                responseMessage: "NoError",
                processorResponseCode: "0",
            },
            customFields: [{ name: "yourCustomField", value: "abc123" }],
        };
        server
            .mockEndpoint()
            .post("/bank-transfer-payments/M2MJOG6O2Y/represent")
            .header("Idempotency-Key", "8e03978e-40d5-43e8-bc93-6894a57f9324")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.payments.bankTransferPayments.represent({
            "Idempotency-Key": "8e03978e-40d5-43e8-bc93-6894a57f9324",
            paymentId: "M2MJOG6O2Y",
            paymentMethod: {
                type: "ach",
                nameOnAccount: "Shara Hazel Hopper",
                accountNumber: "1234567890",
                routingNumber: "123456789",
            },
        });
        expect(response).toEqual({
            paymentId: "M2MJOG6O2Y",
            processingTerminalId: "1234001",
            order: {
                orderId: "OrderRef6543",
                dateTime: "2024-07-02T15:30:00Z",
                description: "Large Pepperoni Pizza",
                amount: 4999,
                currency: "USD",
                breakdown: {
                    subtotal: 4347,
                    tip: {
                        type: "percentage",
                        amount: 435,
                        percentage: 10,
                    },
                    taxes: [
                        {
                            name: "Sales Tax",
                            rate: 5,
                            amount: 217,
                        },
                    ],
                },
            },
            customer: {
                notificationLanguage: "en",
                contactMethods: [
                    {
                        type: "email",
                        value: "jane.doe@example.com",
                    },
                ],
            },
            bankAccount: {
                type: "ach",
                secCode: "web",
                nameOnAccount: "Sarah Hazel Hopper",
                accountNumber: "123456789",
                routingNumber: "123456789",
                secureToken: {
                    secureTokenId: "MREF_abc1de23-f4a5-6789-bcd0-12e345678901fa",
                    customerName: "Sarah Hazel Hopper",
                    token: "296753123456",
                    status: "notValidated",
                    link: {
                        rel: "previous",
                        method: "get",
                        href: "<uri>",
                    },
                },
            },
            refunds: [
                {
                    refundId: "CD3HN88U9F",
                    dateTime: "2024-07-14T12:25:00Z",
                    currency: "AED",
                    amount: 4999,
                    status: "ready",
                    responseCode: "A",
                    responseMessage: "Transaction refunded",
                    link: {
                        rel: "previous",
                        method: "get",
                        href: "<uri>",
                    },
                },
            ],
            returns: [
                {
                    paymentId: "M2MJOG6O2Y",
                    date: "2024-07-02",
                    returnCode: "R11",
                    returnReason: "Customer advises not authorized",
                    represented: false,
                    link: {
                        rel: "previous",
                        method: "get",
                        href: "<uri>",
                    },
                },
            ],
            representment: {
                paymentId: "M2MJOG6O2Y",
                dateTime: "2024-07-02T15:30:00Z",
                currency: "AED",
                amount: 4999,
                status: "ready",
                responseCode: "A",
                responseMessage: "Transaction approved",
                link: {
                    rel: "previous",
                    method: "get",
                    href: "<uri>",
                },
            },
            transactionResult: {
                type: "payment",
                status: "ready",
                authorizedAmount: 4999,
                currency: "USD",
                responseCode: "A",
                responseMessage: "NoError",
                processorResponseCode: "0",
            },
            customFields: [
                {
                    name: "yourCustomField",
                    value: "abc123",
                },
            ],
        });
    });

    test("represent (2)", async () => {
        const server = mockServerPool.createServer();
        mockBearer(server);

        const client = new PayrocClient({
            maxRetries: 0,
            apiKey: "x-api-key",
            environment: { api: server.baseUrl, identity: server.baseUrl },
        });
        const rawRequestBody = {};
        const rawResponseBody = { type: "type", title: "title", status: 1, detail: "detail" };
        server
            .mockEndpoint()
            .post("/bank-transfer-payments/paymentId/represent")
            .header("Idempotency-Key", "idempotencyKey")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.payments.bankTransferPayments.represent({
                "Idempotency-Key": "idempotencyKey",
                paymentId: "paymentId",
            });
        }).rejects.toThrow(Payroc.BadRequestError);
    });

    test("represent (3)", async () => {
        const server = mockServerPool.createServer();
        mockBearer(server);

        const client = new PayrocClient({
            maxRetries: 0,
            apiKey: "x-api-key",
            environment: { api: server.baseUrl, identity: server.baseUrl },
        });
        const rawRequestBody = {};
        const rawResponseBody = { type: "type", title: "title", status: 1, detail: "detail" };
        server
            .mockEndpoint()
            .post("/bank-transfer-payments/paymentId/represent")
            .header("Idempotency-Key", "idempotencyKey")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(401)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.payments.bankTransferPayments.represent({
                "Idempotency-Key": "idempotencyKey",
                paymentId: "paymentId",
            });
        }).rejects.toThrow(Payroc.UnauthorizedError);
    });

    test("represent (4)", async () => {
        const server = mockServerPool.createServer();
        mockBearer(server);

        const client = new PayrocClient({
            maxRetries: 0,
            apiKey: "x-api-key",
            environment: { api: server.baseUrl, identity: server.baseUrl },
        });
        const rawRequestBody = {};
        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .post("/bank-transfer-payments/paymentId/represent")
            .header("Idempotency-Key", "idempotencyKey")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(403)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.payments.bankTransferPayments.represent({
                "Idempotency-Key": "idempotencyKey",
                paymentId: "paymentId",
            });
        }).rejects.toThrow(Payroc.ForbiddenError);
    });

    test("represent (5)", async () => {
        const server = mockServerPool.createServer();
        mockBearer(server);

        const client = new PayrocClient({
            maxRetries: 0,
            apiKey: "x-api-key",
            environment: { api: server.baseUrl, identity: server.baseUrl },
        });
        const rawRequestBody = {};
        const rawResponseBody = { type: "type", title: "title", status: 1, detail: "detail" };
        server
            .mockEndpoint()
            .post("/bank-transfer-payments/paymentId/represent")
            .header("Idempotency-Key", "idempotencyKey")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(404)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.payments.bankTransferPayments.represent({
                "Idempotency-Key": "idempotencyKey",
                paymentId: "paymentId",
            });
        }).rejects.toThrow(Payroc.NotFoundError);
    });

    test("represent (6)", async () => {
        const server = mockServerPool.createServer();
        mockBearer(server);

        const client = new PayrocClient({
            maxRetries: 0,
            apiKey: "x-api-key",
            environment: { api: server.baseUrl, identity: server.baseUrl },
        });
        const rawRequestBody = {};
        const rawResponseBody = { type: "type", title: "title", status: 1, detail: "detail" };
        server
            .mockEndpoint()
            .post("/bank-transfer-payments/paymentId/represent")
            .header("Idempotency-Key", "idempotencyKey")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(406)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.payments.bankTransferPayments.represent({
                "Idempotency-Key": "idempotencyKey",
                paymentId: "paymentId",
            });
        }).rejects.toThrow(Payroc.NotAcceptableError);
    });

    test("represent (7)", async () => {
        const server = mockServerPool.createServer();
        mockBearer(server);

        const client = new PayrocClient({
            maxRetries: 0,
            apiKey: "x-api-key",
            environment: { api: server.baseUrl, identity: server.baseUrl },
        });
        const rawRequestBody = {};
        const rawResponseBody = { type: "type", title: "title", status: 1, detail: "detail" };
        server
            .mockEndpoint()
            .post("/bank-transfer-payments/paymentId/represent")
            .header("Idempotency-Key", "idempotencyKey")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(409)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.payments.bankTransferPayments.represent({
                "Idempotency-Key": "idempotencyKey",
                paymentId: "paymentId",
            });
        }).rejects.toThrow(Payroc.ConflictError);
    });

    test("represent (8)", async () => {
        const server = mockServerPool.createServer();
        mockBearer(server);

        const client = new PayrocClient({
            maxRetries: 0,
            apiKey: "x-api-key",
            environment: { api: server.baseUrl, identity: server.baseUrl },
        });
        const rawRequestBody = {};
        const rawResponseBody = { type: "type", title: "title", status: 1, detail: "detail" };
        server
            .mockEndpoint()
            .post("/bank-transfer-payments/paymentId/represent")
            .header("Idempotency-Key", "idempotencyKey")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(415)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.payments.bankTransferPayments.represent({
                "Idempotency-Key": "idempotencyKey",
                paymentId: "paymentId",
            });
        }).rejects.toThrow(Payroc.UnsupportedMediaTypeError);
    });

    test("represent (9)", async () => {
        const server = mockServerPool.createServer();
        mockBearer(server);

        const client = new PayrocClient({
            maxRetries: 0,
            apiKey: "x-api-key",
            environment: { api: server.baseUrl, identity: server.baseUrl },
        });
        const rawRequestBody = {};
        const rawResponseBody = { type: "type", title: "title", status: 1, detail: "detail" };
        server
            .mockEndpoint()
            .post("/bank-transfer-payments/paymentId/represent")
            .header("Idempotency-Key", "idempotencyKey")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(500)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.payments.bankTransferPayments.represent({
                "Idempotency-Key": "idempotencyKey",
                paymentId: "paymentId",
            });
        }).rejects.toThrow(Payroc.InternalServerError);
    });
});

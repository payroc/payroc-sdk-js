// This file was auto-generated by Fern from our API Definition.

import * as Payroc from "../../../src/api/index";
import { PayrocClient } from "../../../src/Client";
import { mockServerPool } from "../../mock-server/MockServerPool";
import { mockBearer } from "../mockAuth";

describe("ProcessingTerminalsClient", () => {
    test("retrieve (1)", async () => {
        const server = mockServerPool.createServer();
        mockBearer(server);

        const client = new PayrocClient({
            maxRetries: 0,
            apiKey: "x-api-key",
            environment: { api: server.baseUrl, identity: server.baseUrl },
        });

        const rawResponseBody = {
            processingTerminalId: "011234001",
            status: "active",
            timezone: "Pacific/Midway",
            program: "Payroc Cloud",
            gateway: { gateway: "payroc", terminalTemplateId: "Roc Services_DX8000" },
            batchClosure: { batchCloseType: "automatic", batchCloseTime: "23:40" },
            applicationSettings: { invoiceNumberPrompt: true, clerkPrompt: false },
            features: {
                tips: { enabled: false },
                enhancedProcessing: {
                    enabled: true,
                    transactionDataLevel: "level2",
                    shippingAddressMode: "fullAddress",
                },
                ebt: { enabled: true, ebtType: "foodStamp", fnsNumber: "3456789" },
                pinDebitCashback: false,
                recurringPayments: true,
                paymentLinks: { enabled: true, logoUrl: "LogoPayLink", footerNotes: "FooterNotesPayLink" },
                preAuthorizations: true,
                offlinePayments: true,
            },
            taxes: [{ taxRate: 6, taxLabel: "Sales Tax" }],
            security: { tokenization: false, avsPrompt: true, avsLevel: "fullAddress", cvvPrompt: true },
            receiptNotifications: { emailReceipt: true, smsReceipt: false },
            devices: [
                {
                    manufacturer: "Ingenico",
                    model: "Axium Dx4000 Tsys",
                    serialNumber: "DX400-1234",
                    communicationType: "bluetooth",
                },
            ],
        };
        server
            .mockEndpoint()
            .get("/processing-terminals/1234001")
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.boarding.processingTerminals.retrieve({
            processingTerminalId: "1234001",
        });
        expect(response).toEqual({
            processingTerminalId: "011234001",
            status: "active",
            timezone: "Pacific/Midway",
            program: "Payroc Cloud",
            gateway: {
                gateway: "payroc",
                terminalTemplateId: "Roc Services_DX8000",
            },
            batchClosure: {
                batchCloseType: "automatic",
                batchCloseTime: "23:40",
            },
            applicationSettings: {
                invoiceNumberPrompt: true,
                clerkPrompt: false,
            },
            features: {
                tips: {
                    enabled: false,
                },
                enhancedProcessing: {
                    enabled: true,
                    transactionDataLevel: "level2",
                    shippingAddressMode: "fullAddress",
                },
                ebt: {
                    enabled: true,
                    ebtType: "foodStamp",
                    fnsNumber: "3456789",
                },
                pinDebitCashback: false,
                recurringPayments: true,
                paymentLinks: {
                    enabled: true,
                    logoUrl: "LogoPayLink",
                    footerNotes: "FooterNotesPayLink",
                },
                preAuthorizations: true,
                offlinePayments: true,
            },
            taxes: [
                {
                    taxRate: 6,
                    taxLabel: "Sales Tax",
                },
            ],
            security: {
                tokenization: false,
                avsPrompt: true,
                avsLevel: "fullAddress",
                cvvPrompt: true,
            },
            receiptNotifications: {
                emailReceipt: true,
                smsReceipt: false,
            },
            devices: [
                {
                    manufacturer: "Ingenico",
                    model: "Axium Dx4000 Tsys",
                    serialNumber: "DX400-1234",
                    communicationType: "bluetooth",
                },
            ],
        });
    });

    test("retrieve (2)", async () => {
        const server = mockServerPool.createServer();
        mockBearer(server);

        const client = new PayrocClient({
            maxRetries: 0,
            apiKey: "x-api-key",
            environment: { api: server.baseUrl, identity: server.baseUrl },
        });

        const rawResponseBody = { type: "type", title: "title", status: 1, detail: "detail" };
        server
            .mockEndpoint()
            .get("/processing-terminals/processingTerminalId")
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.boarding.processingTerminals.retrieve({
                processingTerminalId: "processingTerminalId",
            });
        }).rejects.toThrow(Payroc.BadRequestError);
    });

    test("retrieve (3)", async () => {
        const server = mockServerPool.createServer();
        mockBearer(server);

        const client = new PayrocClient({
            maxRetries: 0,
            apiKey: "x-api-key",
            environment: { api: server.baseUrl, identity: server.baseUrl },
        });

        const rawResponseBody = { type: "type", title: "title", status: 1, detail: "detail" };
        server
            .mockEndpoint()
            .get("/processing-terminals/processingTerminalId")
            .respondWith()
            .statusCode(401)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.boarding.processingTerminals.retrieve({
                processingTerminalId: "processingTerminalId",
            });
        }).rejects.toThrow(Payroc.UnauthorizedError);
    });

    test("retrieve (4)", async () => {
        const server = mockServerPool.createServer();
        mockBearer(server);

        const client = new PayrocClient({
            maxRetries: 0,
            apiKey: "x-api-key",
            environment: { api: server.baseUrl, identity: server.baseUrl },
        });

        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .get("/processing-terminals/processingTerminalId")
            .respondWith()
            .statusCode(403)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.boarding.processingTerminals.retrieve({
                processingTerminalId: "processingTerminalId",
            });
        }).rejects.toThrow(Payroc.ForbiddenError);
    });

    test("retrieve (5)", async () => {
        const server = mockServerPool.createServer();
        mockBearer(server);

        const client = new PayrocClient({
            maxRetries: 0,
            apiKey: "x-api-key",
            environment: { api: server.baseUrl, identity: server.baseUrl },
        });

        const rawResponseBody = { type: "type", title: "title", status: 1, detail: "detail" };
        server
            .mockEndpoint()
            .get("/processing-terminals/processingTerminalId")
            .respondWith()
            .statusCode(404)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.boarding.processingTerminals.retrieve({
                processingTerminalId: "processingTerminalId",
            });
        }).rejects.toThrow(Payroc.NotFoundError);
    });

    test("retrieve (6)", async () => {
        const server = mockServerPool.createServer();
        mockBearer(server);

        const client = new PayrocClient({
            maxRetries: 0,
            apiKey: "x-api-key",
            environment: { api: server.baseUrl, identity: server.baseUrl },
        });

        const rawResponseBody = { type: "type", title: "title", status: 1, detail: "detail" };
        server
            .mockEndpoint()
            .get("/processing-terminals/processingTerminalId")
            .respondWith()
            .statusCode(406)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.boarding.processingTerminals.retrieve({
                processingTerminalId: "processingTerminalId",
            });
        }).rejects.toThrow(Payroc.NotAcceptableError);
    });

    test("retrieve (7)", async () => {
        const server = mockServerPool.createServer();
        mockBearer(server);

        const client = new PayrocClient({
            maxRetries: 0,
            apiKey: "x-api-key",
            environment: { api: server.baseUrl, identity: server.baseUrl },
        });

        const rawResponseBody = { type: "type", title: "title", status: 1, detail: "detail" };
        server
            .mockEndpoint()
            .get("/processing-terminals/processingTerminalId")
            .respondWith()
            .statusCode(500)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.boarding.processingTerminals.retrieve({
                processingTerminalId: "processingTerminalId",
            });
        }).rejects.toThrow(Payroc.InternalServerError);
    });

    test("retrieveHostConfiguration (1)", async () => {
        const server = mockServerPool.createServer();
        mockBearer(server);

        const client = new PayrocClient({
            maxRetries: 0,
            apiKey: "x-api-key",
            environment: { api: server.baseUrl, identity: server.baseUrl },
        });

        const rawResponseBody = {
            processingTerminalId: "0123451001",
            processingAccountId: "23451",
            configuration: {
                processor: "tsys",
                merchant: {
                    posMid: "123456789101",
                    chainNumber: "222222",
                    settlementAgent: "0001",
                    abaNumber: "967854108",
                    binNumber: "888888",
                    agentBankNumber: "000001",
                    reimbursementAttribute: "Z",
                    locationNumber: "000001",
                },
                terminal: {
                    terminalId: "V500000",
                    terminalNumber: "1111",
                    authenticationCode: "A1B2C3",
                    sharingGroups: "3E7HULY8NQWZG",
                    motoAllowed: true,
                    internetAllowed: true,
                    cardPresentAllowed: true,
                },
            },
        };
        server
            .mockEndpoint()
            .get("/processing-terminals/1234001/host-configurations")
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.boarding.processingTerminals.retrieveHostConfiguration({
            processingTerminalId: "1234001",
        });
        expect(response).toEqual({
            processingTerminalId: "0123451001",
            processingAccountId: "23451",
            configuration: {
                processor: "tsys",
                merchant: {
                    posMid: "123456789101",
                    chainNumber: "222222",
                    settlementAgent: "0001",
                    abaNumber: "967854108",
                    binNumber: "888888",
                    agentBankNumber: "000001",
                    reimbursementAttribute: "Z",
                    locationNumber: "000001",
                },
                terminal: {
                    terminalId: "V500000",
                    terminalNumber: "1111",
                    authenticationCode: "A1B2C3",
                    sharingGroups: "3E7HULY8NQWZG",
                    motoAllowed: true,
                    internetAllowed: true,
                    cardPresentAllowed: true,
                },
            },
        });
    });

    test("retrieveHostConfiguration (2)", async () => {
        const server = mockServerPool.createServer();
        mockBearer(server);

        const client = new PayrocClient({
            maxRetries: 0,
            apiKey: "x-api-key",
            environment: { api: server.baseUrl, identity: server.baseUrl },
        });

        const rawResponseBody = { type: "type", title: "title", status: 1, detail: "detail" };
        server
            .mockEndpoint()
            .get("/processing-terminals/processingTerminalId/host-configurations")
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.boarding.processingTerminals.retrieveHostConfiguration({
                processingTerminalId: "processingTerminalId",
            });
        }).rejects.toThrow(Payroc.BadRequestError);
    });

    test("retrieveHostConfiguration (3)", async () => {
        const server = mockServerPool.createServer();
        mockBearer(server);

        const client = new PayrocClient({
            maxRetries: 0,
            apiKey: "x-api-key",
            environment: { api: server.baseUrl, identity: server.baseUrl },
        });

        const rawResponseBody = { type: "type", title: "title", status: 1, detail: "detail" };
        server
            .mockEndpoint()
            .get("/processing-terminals/processingTerminalId/host-configurations")
            .respondWith()
            .statusCode(401)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.boarding.processingTerminals.retrieveHostConfiguration({
                processingTerminalId: "processingTerminalId",
            });
        }).rejects.toThrow(Payroc.UnauthorizedError);
    });

    test("retrieveHostConfiguration (4)", async () => {
        const server = mockServerPool.createServer();
        mockBearer(server);

        const client = new PayrocClient({
            maxRetries: 0,
            apiKey: "x-api-key",
            environment: { api: server.baseUrl, identity: server.baseUrl },
        });

        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .get("/processing-terminals/processingTerminalId/host-configurations")
            .respondWith()
            .statusCode(403)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.boarding.processingTerminals.retrieveHostConfiguration({
                processingTerminalId: "processingTerminalId",
            });
        }).rejects.toThrow(Payroc.ForbiddenError);
    });

    test("retrieveHostConfiguration (5)", async () => {
        const server = mockServerPool.createServer();
        mockBearer(server);

        const client = new PayrocClient({
            maxRetries: 0,
            apiKey: "x-api-key",
            environment: { api: server.baseUrl, identity: server.baseUrl },
        });

        const rawResponseBody = { type: "type", title: "title", status: 1, detail: "detail" };
        server
            .mockEndpoint()
            .get("/processing-terminals/processingTerminalId/host-configurations")
            .respondWith()
            .statusCode(404)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.boarding.processingTerminals.retrieveHostConfiguration({
                processingTerminalId: "processingTerminalId",
            });
        }).rejects.toThrow(Payroc.NotFoundError);
    });

    test("retrieveHostConfiguration (6)", async () => {
        const server = mockServerPool.createServer();
        mockBearer(server);

        const client = new PayrocClient({
            maxRetries: 0,
            apiKey: "x-api-key",
            environment: { api: server.baseUrl, identity: server.baseUrl },
        });

        const rawResponseBody = { type: "type", title: "title", status: 1, detail: "detail" };
        server
            .mockEndpoint()
            .get("/processing-terminals/processingTerminalId/host-configurations")
            .respondWith()
            .statusCode(406)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.boarding.processingTerminals.retrieveHostConfiguration({
                processingTerminalId: "processingTerminalId",
            });
        }).rejects.toThrow(Payroc.NotAcceptableError);
    });

    test("retrieveHostConfiguration (7)", async () => {
        const server = mockServerPool.createServer();
        mockBearer(server);

        const client = new PayrocClient({
            maxRetries: 0,
            apiKey: "x-api-key",
            environment: { api: server.baseUrl, identity: server.baseUrl },
        });

        const rawResponseBody = { type: "type", title: "title", status: 1, detail: "detail" };
        server
            .mockEndpoint()
            .get("/processing-terminals/processingTerminalId/host-configurations")
            .respondWith()
            .statusCode(500)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.boarding.processingTerminals.retrieveHostConfiguration({
                processingTerminalId: "processingTerminalId",
            });
        }).rejects.toThrow(Payroc.InternalServerError);
    });
});
